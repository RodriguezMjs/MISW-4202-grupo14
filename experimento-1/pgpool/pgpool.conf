# ======================
# Conexión y backend nodes
# ======================
listen_addresses = '*'
port = 5432

backend_hostname0 = 'postgres-primary'
backend_port0 = 5432
backend_weight0 = 1
backend_flag0 = 'ALWAYS_PRIMARY|DISALLOW_TO_FAILOVER'

backend_hostname1 = 'postgres-replica'
backend_port1 = 5432
backend_weight1 = 1
backend_flag1 = 'DISALLOW_TO_FAILOVER'

# ======================
# Modo (streaming replication)
# ======================
sr_check_period = 10
sr_check_user = 'postgres'
sr_check_password = 'postgres_pass'

health_check_period = 10
health_check_timeout = 5
health_check_user = 'postgres'
health_check_password = 'postgres_pass'

# ======================
# Balanceo de lecturas
# ======================
load_balance_mode = on

# Muy importante para que Pgpool detecte que un SELECT es “solo lectura”
disable_load_balance_on_write = 'transaction'

# ======================
# Logging útil para el experimento
# ======================
log_connections = on
log_disconnections = on
log_statement = on